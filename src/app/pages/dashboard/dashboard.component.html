<app-navbar></app-navbar>

<main class="container-xxl py-5">
  <h3 class="mb-4">Bienvenido, DenisğŸ‘‹</h3>

  <!-- Tarjetas de resumen -->
  <div class="row g-4">
    <div class="col-md-3">
      <div class="card shadow-sm p-3 text-center">
        <h5 class="mb-1">ğŸ”¥ CalorÃ­as consumidas</h5>
        <p class="fs-4 fw-bold text-primary">{{ caloriasConsumidas }} kcal</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm p-3 text-center">
        <h5 class="mb-1">ğŸ¥© ProteÃ­nas</h5>
        <p class="fs-4 fw-bold text-success">{{ proteinasConsumidas }}g</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm p-3 text-center">
        <h5 class="mb-1">ğŸ Carbohidratos</h5>
        <p class="fs-4 fw-bold text-warning">{{ carbohidratosConsumidos }}g</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm p-3 text-center">
        <h5 class="mb-1">ğŸ§ˆ Grasas</h5>
        <p class="fs-4 fw-bold text-danger">{{ grasasConsumidas }}g</p>
      </div>
    </div>
  </div>

  <!-- Ãšltimos alimentos aÃ±adidos -->
  <div class="row g-4 mt-4">
    <div class="col-md-6">
      <!-- Lista de alimentos consumidos en el dÃ­a -->
      <div class="card shadow-sm p-3">
        <h5 class="mb-3">ğŸ½ï¸ Ultimas comidas registradas</h5>
        <ul class="list-group">
          @for (comida of ultimasComidas; track comida.id) {
            <li class="list-group-item d-flex align-items-center">
              <!-- Imagen del alimento con fallback a placeholder -->
              <img [src]="comida.imagen || 'https://placehold.co/80x80'"
                   class="rounded me-3"
                   style="width: 80px; height: 80px;"
                   [alt]="comida.nombre"
                   (error)="comida.imagen = 'https://placehold.co/80x80'">

              <div class="flex-grow-1">
                <h6 class="mb-1">{{ comida.nombre }}</h6>
                <small class="text-muted">{{ comida.cantidad }}</small>
                <p class="mb-0">ğŸ”¥ {{ comida.calorias }} kcal | ğŸ¥© {{ comida.proteinas }}g | ğŸ {{ comida.carbohidratos }}g | ğŸ§ˆ {{ comida.grasas }}g</p>
              </div>
            </li>
          }
        </ul>
      </div>

    </div>

    <!-- Balance Nutricional -->
    <div class="col-md-6">
      <div class="card shadow-sm p-3">
        <h5 class="mb-3">ğŸ¯ Balance Nutricional</h5>
        <ul class="list-group">
          <li class="list-group-item d-flex justify-content-between">
            ğŸ”¥ CalorÃ­as restantes
            <span class="badge bg-primary">{{ caloriasRestantes }} kcal</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            ğŸ¥© ProteÃ­nas restantes
            <span class="badge bg-success">{{ proteinasRestantes }} g</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            ğŸ Carbohidratos restantes
            <span class="badge bg-warning">{{ carbohidratosRestantes }} g</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            ğŸ§ˆ Grasas restantes
            <span class="badge bg-danger">{{ grasasRestantes }} g</span>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- SecciÃ³n de grÃ¡ficos (Ãºltima en la pÃ¡gina) -->
  <div class="row g-4 mt-4">
    <div class="col-md-6">
      <div class="card shadow-sm p-3">
        <h5 class="mb-3">ğŸ“Š Consumo de CalorÃ­as</h5>
        <canvas id="caloriasChart"></canvas>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card shadow-sm p-3">
        <h5 class="mb-3">âš–ï¸ EvoluciÃ³n del Peso</h5>
        <canvas id="pesoChart"></canvas>
      </div>
    </div>
  </div>
</main>
