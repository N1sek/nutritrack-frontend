<app-navbar></app-navbar>

<main class="container-xxl py-5">
  <h3 class="mb-4">üìä Informes de Nutrici√≥n</h3>

  <!-- üîç Filtros -->
  <div class="card mb-4 shadow-sm">
    <div class="card-body">
      <h5 class="card-title mb-3">üìÖ Filtros</h5>
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">Desde</label>
          <input type="date" class="form-control" [(ngModel)]="fechaInicio">
        </div>
        <div class="col-md-4">
          <label class="form-label">Hasta</label>
          <input type="date" class="form-control" [(ngModel)]="fechaFin">
        </div>
        <div class="col-md-4">
          <label class="form-label">Tipo de Informe</label>
          <select class="form-select" [(ngModel)]="tipoInforme">
            <option value="calorias">Consumo de Calor√≠as</option>
            <option value="macronutrientes">Distribuci√≥n de Macronutrientes</option>
            <option value="agua">Registro de Agua</option>
            <option value="peso">Peso Corporal</option>
            <option value="ayuno">Tiempo de Ayuno</option> <!-- Nuevo Informe -->
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- üìä Secci√≥n de Gr√°ficos -->
  <div class="row g-4">
    <div class="col-md-6">
      <app-box class="h-100">
        <h5 class="text-center mb-3">üî• Consumo de Calor√≠as</h5>
        <canvas id="caloriasChart"></canvas>
      </app-box>
    </div>

    <div class="col-md-6">
      <app-box class="h-100">
        <h5 class="text-center mb-3">üçΩÔ∏è Macronutrientes</h5>
        <canvas id="macronutrientesChart"></canvas>
      </app-box>
    </div>

    <div class="col-md-6">
      <app-box class="h-100">
        <h5 class="text-center mb-3">üíß Consumo de Agua</h5>
        <canvas id="aguaChart"></canvas>
      </app-box>
    </div>

    <div class="col-md-6">
      <app-box class="h-100">
        <h5 class="text-center mb-3">‚öñÔ∏è Evoluci√≥n del Peso</h5>
        <canvas id="pesoChart"></canvas>
      </app-box>
    </div>

    <!-- Nuevo Informe: Tiempo de Ayuno -->
    <div class="col-md-6">
      <app-box class="h-100">
        <h5 class="text-center mb-3">‚è≥ Tiempo de Ayuno</h5>
        <canvas id="ayunoChart"></canvas>
      </app-box>
    </div>
  </div>

  <!-- üìã Tabla de Datos -->
  <div class="card mt-4 shadow-sm">
    <div class="card-body">
      <h5 class="card-title mb-3">üìë Datos Detallados</h5>
      <div class="table-responsive">
        <table class="table table-hover">
          <thead class="table-primary">
          <tr>
            <th>Fecha</th>
            <th>Calor√≠as (kcal)</th>
            <th>Prote√≠nas (g)</th>
            <th>Carbohidratos (g)</th>
            <th>Grasas (g)</th>
            <th>Agua (L)</th>
            <th>Peso (kg)</th>
            <th>Ayuno (h)</th> <!-- Nuevo dato -->
          </tr>
          </thead>
          <tbody>
            @for (registro of registros; track registro) {
              <tr>
                <td>{{ registro.fecha }}</td>
                <td>{{ registro.calorias }}</td>
                <td>{{ registro.proteinas }}</td>
                <td>{{ registro.carbohidratos }}</td>
                <td>{{ registro.grasas }}</td>
                <td>{{ registro.agua }}</td>
                <td>{{ registro.peso }}</td>
                <td>{{ registro.ayuno }}</td> <!-- Nuevo dato -->
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- üì§ Botones de Exportaci√≥n -->
  <div class="d-flex justify-content-end mt-3 gap-2">
    <button class="btn btn-outline-secondary"><i class="bi bi-file-earmark-text"></i> Exportar CSV</button>
    <button class="btn btn-outline-primary"><i class="bi bi-file-earmark-excel"></i> Exportar Excel</button>
    <button class="btn btn-outline-danger"><i class="bi bi-file-earmark-pdf"></i> Exportar PDF</button>
  </div>
</main>
